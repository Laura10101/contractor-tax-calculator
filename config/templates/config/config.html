{% extends "base.html" %}
{% load static %}

{% block extra_js %}
    <script src="{% static 'js/view_consts.js' %}"></script>
    <script src="{% static 'js/view_models.js' %}"></script>
    <script src="{% static 'js/service_clients.js' %}"></script>
    <script src="{% static 'js/view_utils.js' %}"></script>
    <script src="{% static 'js/views.js' %}"></script>
{% endblock %}

{% block content %}
    <!-- Begin dialog prototypes -->
        <!-- Question type dialog -->
            <div class="modal" id="question-type-modal" tabindex="-1" data-backdrop="static" data-keyboard="false" 
                aria-labelledby="question-type-modal-label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <!-- Begin modal header -->
                            <div class="modal-header">
                                <h5 class="modal-title" id="question-type-modal-label">Select Question Type</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        <!-- End modal header -->

                        <!-- Begin modal body -->
                            <div class="modal-body">
                                <div class="container">
                                    <div class="row">
                                        <div class="col" id="question-type-modal-input-label">
                                            Which type of question should be created?
                                        </div>
                                        <div class="col">
                                            <select class="custom-select" id="question-type-modal-input">
                                                <option value="boolean">Yes/No</option>
                                                <option value="numeric">Numeric</option>
                                                <option value="multiple_choice">Multiple choice</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <!-- End modal body -->

                        <!-- Begin modal footer -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" onclick="cancelDialog('question-type-modal', true, true)">Cancel</button>
                                <button type="button" class="btn btn-primary" onclick="questionTypeSelected()">Next</button>
                            </div>
                        <!-- End modal footer -->
                    </div>
                </div>
            </div>
        <!-- End question type dialog -->

        <!-- Boolean question dialog -->
            <div class="modal" id="boolean-question-modal" data-backdrop="static" data-keyboard="false"
                tabindex="-1" aria-labelledby="boolean-question-modal-label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <!-- Begin modal header -->
                            <div class="modal-header">
                                <h5 class="modal-title" id="boolean-question-modal-label">Create Boolean Question</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        <!-- End modal header -->

                        <!-- Begin modal body -->
                            <div class="modal-body">
                                <div class="container">
                                    <!-- Begin errors -->
                                    <div class="row">
                                        <div class="col text-center" id="boolean-question-errors"></div>
                                    </div>
                                    <!-- Begin errors -->

                                    <div class="row">
                                        <div class="col" id="boolean-question-modal-question-text-label">
                                            Question text
                                        </div>
                                        <div class="col">
                                            <textarea class="form-control" id="boolean-question-modal-question-text-input" rows="3"></textarea>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="boolean-question-modal-explainer-label">
                                            Explainer
                                        </div>
                                        <div class="col">
                                            <textarea class="form-control" id="boolean-question-modal-explainer-input" rows="3"></textarea>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="boolean-question-modal-variable-name-label">
                                            Data Name
                                        </div>
                                        <div class="col">
                                            <input class="form-control" type="text" id="boolean-question-modal-variable-name-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="boolean-question-modal-mandatory-label">
                                            Mandatory?
                                        </div>
                                        <div class="col">
                                            <input class="form-check-input" type="checkbox" value="" id="boolean-question-modal-mandatory-input">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <!-- End modal body -->

                        <!-- Begin modal footer -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" onclick="cancelDialog('boolean-question-modal', true, true)">Close</button>
                                <button type="button" class="btn btn-primary" onclick="saveQuestion()">Save changes</button>
                            </div>
                        <!-- End modal footer -->
                    </div>
                </div>
            </div>
        <!-- End boolean question dialog -->

        <!-- Numeric question dialog -->
            <div class="modal" id="numeric-question-modal" data-backdrop="static" data-keyboard="false"
                tabindex="-1" aria-labelledby="numeric-question-modal-label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <!-- Begin modal header -->
                            <div class="modal-header">
                                <h5 class="modal-title" id="numeric-question-modal-label">Create Numeric Question</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        <!-- End modal header -->

                        <!-- Begin modal body -->
                            <div class="modal-body">
                                <div class="container">
                                    <!-- Begin errors -->
                                    <div class="row">
                                        <div class="col text-center" id="numeric-question-errors"></div>
                                    </div>
                                    <!-- Begin errors -->

                                    <div class="row">
                                        <div class="col" id="numeric-question-modal-question-text-label">
                                            Question text
                                        </div>
                                        <div class="col">
                                            <textarea class="form-control" id="numeric-question-modal-question-text-input" rows="3"></textarea>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="numeric-question-modal-explainer-label">
                                            Explainer
                                        </div>
                                        <div class="col">
                                            <textarea class="form-control" id="numeric-question-modal-explainer-input" rows="3"></textarea>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="numeric-question-modal-variable-name-label">
                                            Data Name
                                        </div>
                                        <div class="col">
                                            <input class="form-control" type="text" id="numeric-question-modal-variable-name-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="numeric-question-modal-mandatory-label">
                                            Mandatory?
                                        </div>
                                        <div class="col">
                                            <input class="form-check-input" type="checkbox" value="" id="numeric-question-modal-mandatory-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="numeric-question-modal-is-integer-label">
                                            Integer (non-decimal)?
                                        </div>
                                        <div class="col">
                                            <input class="form-check-input" type="checkbox" value="" id="numeric-question-modal-is-integer-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="numeric-question-modal-min-label">
                                            <p>Minimum value</p>
                                            <p>Leave blank if none</p>
                                        </div>
                                        <div class="col">
                                            <input class="form-control" type="text" id="numeric-question-modal-min-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="numeric-question-modal-max-label">
                                            <p>Maximum value</p>
                                            <p>Leave blank if none</p>
                                        </div>
                                        <div class="col">
                                            <input class="form-control" type="text" id="numeric-question-modal-max-input">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <!-- End modal body -->
                        <!-- Begin modal footer -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" onclick="cancelDialog('numeric-question-modal', true, true)">Close</button>
                                <button type="button" class="btn btn-primary" onclick="saveQuestion()">Save changes</button>
                            </div>
                        <!-- End modal footer -->
                    </div>
                </div>
            </div>
        <!-- End numeric question dialog -->

        <!-- Multiple choice question dialog -->
            <div class="modal" id="multichoice-question-modal" data-backdrop="static" data-keyboard="false"
                tabindex="-1" aria-labelledby="multichoice-question-modal-label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <!-- Begin modal header -->
                            <div class="modal-header">
                                <h5 class="modal-title" id="multichoice-question-modal-label">Create Multiple Choice Question</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        <!-- End modal header -->
                        <!-- Begin modal body -->
                            <div class="modal-body">
                                <div class="container">
                                    <!-- Begin errors -->
                                    <div class="row">
                                        <div class="col text-center" id="multichoice-question-errors"></div>
                                    </div>
                                    <!-- Begin errors -->

                                    <div class="row">
                                        <div class="col" id="multichoice-question-modal-question-text-label">
                                            Question text
                                        </div>
                                        <div class="col">
                                            <textarea class="form-control" id="multichoice-question-modal-question-text-input" rows="3"></textarea>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="multichoice-question-modal-explainer-label">
                                            Explainer
                                        </div>
                                        <div class="col">
                                            <textarea class="form-control" id="multichoice-question-modal-explainer-input" rows="3"></textarea>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="multichoice-question-modal-variable-name-label">
                                            Data Name
                                        </div>
                                        <div class="col">
                                            <input class="form-control" type="text" id="multichoice-question-modal-variable-name-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="multichoice-question-modal-mandatory-label">
                                            Mandatory?
                                        </div>
                                        <div class="col">
                                            <input class="form-check-input" type="checkbox" value="" id="multichoice-question-modal-mandatory-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="multichoice-question-modal-multiselect-label">
                                            Allow multiselect?
                                        </div>
                                        <div class="col">
                                            <input class="form-check-input" type="checkbox" value="" id="multichoice-question-modal-multiselect-input">
                                        </div>
                                    </div>
                                    <div class="row" id="options-row">
                                        <div class="col" id="multichoice-question-modal-options-label">
                                            Options
                                        </div>
                                        <div class="col">
                                            <div class="container">
                                                <div class="row">
                                                    <div class="col">
                                                        <i class="fas fa-plus" onclick="createMultipleChoiceOption()"></i> Option
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col">
                                                        <table class="table" id="multichoice-question-modal-options-table">
                                                            <tr id="multichoice-question-modal-options-row" class="hidden">
                                                                <td id="multichoice-question-modal-options-text">Option text</td>
                                                                <td>
                                                                    <i class="fas fa-trash-alt delete-button"
                                                                        data-toggle="tooltip" data-placement="top"
                                                                        title="Delete this option"></i>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <!-- End modal body -->

                        <!-- Begin modal footer -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" onclick="cancelChildDialog('multichoice-question-modal')">Close</button>
                                <button type="button" class="btn btn-primary" onclick="saveQuestion()">Save changes</button>
                            </div>
                        <!-- End modal footer -->
                    </div>
                </div>
            </div>
        <!-- End multiple choice question dialog -->

        <!-- Multiple choice option dialog -->
            <div class="modal" id="multiple-choice-option-modal" data-backdrop="static" data-keyboard="false"
                tabindex="-1" aria-labelledby="multiple-choice-option-modal-label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <!-- Begin modal header -->
                            <div class="modal-header">
                                <h5 class="modal-title" id="multiple-choice-option-modal-label">Create Multiple Choice Option</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        <!-- End modal header -->

                        <!-- Begin modal body -->
                            <div class="modal-body">
                                <div class="container">
                                    <!-- Begin errors -->
                                    <div class="row">
                                        <div class="col text-center" id="multiple-choice-option-errors"></div>
                                    </div>
                                    <!-- Begin errors -->

                                    <div class="row">
                                        <div class="col" id="multiple-choice-option-modal-name-label">
                                            <p>Name</p>
                                        </div>
                                        <div class="col">
                                            <input class="form-control" type="text" id="multiple-choice-option-modal-name">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="multiple-choice-option-modal-explainer-label">
                                            <p>Explainer</p>
                                        </div>
                                        <div class="col">
                                            <input class="form-control" type="text" id="multiple-choice-option-modal-explainer">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <!-- End modal body -->

                        <!-- Begin modal footer -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" onclick="cancelDialog('multiple-choice-option-modal', true, true)">Close</button>
                                <button type="button" class="btn btn-primary" onclick="saveMultipleChoiceOption()">Create option</button>
                            </div>
                        <!-- End modal footer -->
                    </div>
                </div>
            </div>
        <!-- End multiple choice option dialog -->

        <!-- Ruleset modal -->
        <div class="modal" id="ruleset-modal" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="ruleset-modal-label" aria-hidden="true">
            <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="ruleset-modal-label">Create Tax Rule Collection</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body">
                    <div class="container">
                        <!-- Begin errors -->
                        <div class="row">
                            <div class="col text-center" id="ruleset-errors"></div>
                        </div>
                        <!-- Begin errors -->

                        <div class="row">
                            <div class="col" id="ruleset-modal-tax-category-label">
                                Tax Category
                            </div>
                            <div class="col">
                                <select class="custom-select" id="ruleset-modal-tax-category-input">
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="cancelDialog('ruleset-modal', true, true)">Close</button>
                <button type="button" class="btn btn-primary" onclick="saveRuleset()">Save changes</button>
                </div>
            </div>
            </div>
        </div>
        <!-- End ruleset modal -->

        <!-- Rule type modal -->
            <div class="modal" id="rule-type-modal" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="rule-type-modal-label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <!-- Begin dialog header -->
                            <div class="modal-header">
                                <h5 class="modal-title" id="rule-type-modal-label">Select Rule Type</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        <!-- End dialog header -->

                        <!-- Begin dialog body -->
                            <div class="modal-body">
                                <div class="container">
                                    <div class="row">
                                        <div class="col" id="rule-type-modal-input-label">
                                            Which type of rule should be created?
                                        </div>
                                        <div class="col">
                                            <select class="custom-select" id="rule-type-modal-input">
                                                <option value="flat_rate">Flat Rate</option>
                                                <option value="tiered_rate">Tiered Rate</option>
                                                <option value="secondary_tiered_rate">Tiered Rate With Progression</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <!-- End dialog body -->

                        <!-- Begin dialog footer -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" onclick="cancelDialog('rule-type-modal', true, true)">Close</button>
                                <button type="button" class="btn btn-primary" onclick="ruleTypeSelected()">Save changes</button>
                            </div>
                        <!-- End dialog footer -->
                    </div>
                </div>
            </div>
        <!-- End rule type modal -->

        <!-- Flat rate rule dialog -->
            <div class="modal" id="flat-rate-rule-modal" data-backdrop="static" data-keyboard="false"
                tabindex="-1" aria-labelledby="flat-rate-rule-modal-label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <!-- Begin dialog header -->
                            <div class="modal-header">
                                <h5 class="modal-title" id="flat-rate-rule-modal-label">Create Flat Rate</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        <!-- End dialog header -->

                        <!-- Begin dialog body -->
                            <div class="modal-body">
                                <div class="container">
                                    <!-- Begin errors -->
                                    <div class="row">
                                        <div class="col text-center" id="flat-rate-rule-errors"></div>
                                    </div>
                                    <!-- Begin errors -->
                                    <div class="row">
                                        <div class="col" id="flat-rate-rule-modal-name-label">
                                            Name
                                        </div>
                                        <div class="col">
                                            <input class="form-control" type="text" id="flat-rate-rule-modal-name-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="flat-rate-rule-modal-explainer-label">
                                            Explainer
                                        </div>
                                        <div class="col">
                                            <textarea class="form-control" id="flat-rate-rule-modal-explainer-input" rows="3"></textarea>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="flat-rate-rule-modal-variable-name-label">
                                            Income Source
                                        </div>
                                        <div class="col">
                                            <select class="custom-select" id="flat-rate-rule-modal-variable-name-input">
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="flat-rate-rule-modal-tax-rate-label">
                                            Tax Rate
                                        </div>
                                        <div class="col">
                                            <input class="form-control" type="text" id="flat-rate-rule-modal-tax-rate-input">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <!-- End dialog body -->

                        <!-- Begin dialog footer -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" onclick="cancelDialog('flat-rate-rule-modal', true, true)">Close</button>
                                <button type="button" class="btn btn-primary" onclick="saveRule()">Save changes</button>
                            </div>
                        <!-- End dialog footer -->
                    </div>
                </div>
            </div>
        <!-- End flat rate rule dialog -->

        <!-- Tiered rate rule dialog -->
            <div class="modal" id="tiered-rate-rule-modal" data-backdrop="static" data-keyboard="false"
                tabindex="-1" aria-labelledby="tiered-rate-rule-modal-label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <!-- Begin dialog header -->
                            <div class="modal-header">
                                <h5 class="modal-title" id="tiered-rate-rule-modal-label">Create Tiered Rate</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        <!-- End dialog header -->

                        <!-- Begin dialog body -->
                            <div class="modal-body">
                                <div class="container">
                                    <!-- Begin errors -->
                                    <div class="row">
                                        <div class="col text-center" id="tiered-rate-rule-errors"></div>
                                    </div>
                                    <!-- Begin errors -->

                                    <div class="row">
                                        <div class="col" id="tiered-rate-rule-modal-name-label">
                                            Name
                                        </div>
                                        <div class="col">
                                            <input class="form-control" type="text" id="tiered-rate-rule-modal-name-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="tiered-rate-rule-modal-explainer-label">
                                            Explainer
                                        </div>
                                        <div class="col">
                                            <textarea class="form-control" id="tiered-rate-rule-modal-explainer-input" rows="3"></textarea>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="tiered-rate-rule-modal-variable-name-label">
                                            Income Source
                                        </div>
                                        <div class="col">
                                            <select class="custom-select" id="tiered-rate-rule-modal-variable-name-input">
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row" id="tiers-row">
                                        <div class="col">
                                            <div class="container">
                                                <div class="row">
                                                    <div class="col">
                                                        <h5 id="tiered-rate-rule-modal-tiers-label">
                                                            Tiers <i class="fas fa-plus" onclick="createRuleTier(true)"
                                                            data-toggle="tooltip" data-placement="top"
                                                            title="Add an additional tier to calculate a portion of the taxable income at a different rate"></i>
                                                        </h5>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col">
                                                        <table class="table text-center">
                                                            <thead>
                                                                <tr>
                                                                    <th scope="col">Lower Limit</th>
                                                                    <th scope="col">Upper Limit</th>
                                                                    <th scope="col">Tax Rate</th>
                                                                    <th scope="col">Actions</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="tiered-rate-rule-modal-tiers-table">
                                                                <tr id="tiered-rate-rule-modal-tiers-row" class="hidden">
                                                                    <td id="tiered-rate-rule-modal-tiers-min">£10,000.00</td>
                                                                    <td id="tiered-rate-rule-modal-tiers-max">£25,000.00</td>
                                                                    <td id="tiered-rate-rule-modal-tiers-rate">8%</td>
                                                                    <td>
                                                                        <i class="fas fa-edit edit-button"
                                                                            data-toggle="tooltip" data-placement="top"
                                                                            title="Edit this tax tier"></i>
                                                                        <i class="fas fa-trash-alt delete-button"
                                                                            data-toggle="tooltip" data-placement="top"
                                                                            title="Delete this tax tier"></i>
                                                                        <i class="fas fa-arrow-up move-up-button"
                                                                            data-toggle="tooltip" data-placement="top"
                                                                            title="Move this tax tier up"></i>
                                                                        <i class="fas fa-arrow-down move-down-button"
                                                                            data-toggle="tooltip" data-placement="top"
                                                                            title="Move this tax tier down"></i>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <!-- End dialog body -->

                        <!-- Begin dialog footer -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" onclick="cancelDialog('tiered-rate-rule-modal', true, true)">Close</button>
                                <button type="button" class="btn btn-primary" onclick="saveRule()">Save changes</button>
                            </div>
                        <!-- End dialog footer -->
                    </div>
                </div>
            </div>
        <!-- End tiered rate rule dialog -->

        <!-- Secondary tiered rate rule dialog -->
            <div class="modal" id="secondary-tiered-rate-rule-modal" data-backdrop="static" data-keyboard="false"
                tabindex="-1" aria-labelledby="secondary-tiered-rate-rule-modal-label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <!-- Begin modal header -->
                            <div class="modal-header">
                                <h5 class="modal-title" id="secondary-tiered-rate-rule-modal-label">Create Progessive Tiered Rate</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        <!-- End modal header -->

                        <!-- Begin modal body -->
                            <div class="modal-body">
                                <div class="container">
                                    <!-- Begin errors -->
                                    <div class="row">
                                        <div class="col text-center" id="secondary-tiered-rate-rule-errors"></div>
                                    </div>
                                    <!-- Begin errors -->
                                    <div class="row">
                                        <div class="col" id="secondary-tiered-rate-rule-modal-name-label">
                                            Name
                                        </div>
                                        <div class="col">
                                            <input class="form-control" type="text" id="secondary-tiered-rate-rule-modal-name-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="secondary-tiered-rate-rule-modal-explainer-label">
                                            Explainer
                                        </div>
                                        <div class="col">
                                            <textarea class="form-control" id="secondary-tiered-rate-rule-modal-explainer-input" rows="3"></textarea>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="secondary-tiered-rate-rule-modal-variable-name-label">
                                            Income Source
                                        </div>
                                        <div class="col">
                                            <select class="custom-select" id="secondary-tiered-rate-rule-modal-variable-name-input">
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="secondary-tiered-rate-rule-modal-primary-rule-label">
                                            Primary Rule
                                        </div>
                                        <div class="col">
                                            <select class="custom-select" id="secondary-tiered-rate-rule-modal-primary-rule-input">
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row" id="secondary-tiers-row">
                                        <div class="col">
                                            <div class="container">
                                                <div class="row">
                                                    <div class="col">
                                                        <h5 id="secondary-tiered-rate-rule-modal-tiers-label">
                                                            Tiers <i class="fas fa-plus" onclick="createRuleTier(false)"
                                                            data-toggle="tooltip" data-placement="top"
                                                            title="Add an additional tier to calculate a portion of the taxable income at a different rate"></i>
                                                        </h5>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col">
                                                        <table class="table text-center">
                                                            <thead>
                                                                <tr>
                                                                    <th scope="col">Lower Limit</th>
                                                                    <th scope="col">Upper Limit</th>
                                                                    <th scope="col">Tax Rate</th>
                                                                    <th scope="col">Actions</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="secondary-tiered-rate-rule-modal-tiers-table">
                                                                <tr id="secondary-tiered-rate-rule-modal-tiers-row" class="hidden">
                                                                    <td id="secondary-tiered-rate-rule-modal-tiers-min">£10,000.00</td>
                                                                    <td id="secondary-tiered-rate-rule-modal-tiers-max">£25,000.00</td>
                                                                    <td id="secondary-tiered-rate-rule-modal-tiers-rate">8%</td>
                                                                    <td>
                                                                        <i class="fas fa-edit edit-button"
                                                                            data-toggle="tooltip" data-placement="top"
                                                                            title="Edit this tax tier"></i>
                                                                        <i class="fas fa-trash-alt delete-button"
                                                                            data-toggle="tooltip" data-placement="top"
                                                                            title="Delete this tax tier"></i>
                                                                        <i class="fas fa-arrow-up move-up-button"
                                                                            data-toggle="tooltip" data-placement="top"
                                                                            title="Move this tax tier up"></i>
                                                                        <i class="fas fa-arrow-down move-down-button"
                                                                            data-toggle="tooltip" data-placement="top"
                                                                            title="Move this tax tier down"></i>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <!-- End modal body -->

                        <!-- Begin modal footer -->
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" onclick="cancelDialog('secondary-tiered-rate-rule-modal', true, true)">Close</button>
                            <button type="button" class="btn btn-primary" onclick="saveRule()">Save changes</button>
                        </div>
                        <!-- End modal footer -->
                    </div>
                </div>
            </div>
        <!-- End secondary tiered rate rule dialog -->

        <!-- Rule tier dialog -->
            <div class="modal" id="rule-tier-modal" data-backdrop="static" data-keyboard="false"
                tabindex="-1" aria-labelledby="rule-tier-modal-label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <!-- Begin dialog header -->
                            <div class="modal-header">
                                <h5 class="modal-title" id="rule-tier-modal-label">Create Tier for Tiered Rate Rule</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        <!-- End dialog header -->

                        <!-- Begin dialog body -->
                            <div class="modal-body">
                                <div class="container">
                                    <!-- Begin errors -->
                                    <div class="row">
                                        <div class="col text-center" id="rule-tier-errors"></div>
                                    </div>
                                    <!-- Begin errors -->
                                    <div class="row">
                                        <div class="col" id="rule-tier-modal-min-label">
                                            <p>Minimum value</p>
                                            <p>Leave blank if none</p>
                                        </div>
                                        <div class="col">
                                            <input class="form-control" type="text" id="rule-tier-modal-min-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="rule-tier-modal-max-label">
                                            <p>Maximum value</p>
                                            <p>Leave blank if none</p>
                                        </div>
                                        <div class="col">
                                            <input class="form-control" type="text" id="rule-tier-modal-max-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="rule-tier-modal-tax-rate-label">
                                            Tax Rate
                                        </div>
                                        <div class="col">
                                            <input class="form-control" type="text" id="rule-tier-modal-tax-rate-input">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <!-- End dialog body -->

                        <!-- Begin dialog footer -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" onclick="cancelChildDialog('rule-tier-modal')">Close</button>
                                <button type="button" class="btn btn-primary" onclick="saveRuleTier()">Save changes</button>
                            </div>
                        <!-- End dialog footer -->
                    </div>
                </div>
            </div>
        <!-- End rule tier dialog -->

        <!-- Secondary rule tier dialog -->
            <div class="modal" id="secondary-rule-tier-modal" data-backdrop="static" data-keyboard="false"
                tabindex="-1" aria-labelledby="secondary-rule-tier-modal-label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <!-- Begin dialog header -->
                            <div class="modal-header">
                                <h5 class="modal-title" id="secondary-rule-tier-modal-label">Create Tier for Secondary Tiered Rate Rule</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        <!-- End dialog header -->

                        <!-- Begin dialog body -->
                            <div class="modal-body">
                                <div class="container">
                                    <!-- Begin errors -->
                                    <div class="row">
                                        <div class="col text-center" id="secondary-rule-tier-errors"></div>
                                    </div>
                                    <!-- Begin errors -->
                                    <div class="row">
                                        <div class="col" id="secondary-rule-tier-modal-primary-tier-label">
                                            Primary Tier
                                        </div>
                                        <div class="col">
                                            <select class="custom-select" id="secondary-rule-tier-modal-primary-tier-input">
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col" id="secondary-rule-tier-modal-tax-rate-label">
                                            Tax Rate
                                        </div>
                                        <div class="col">
                                            <input class="form-control" type="text" id="secondary-rule-tier-modal-tax-rate-input">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <!-- End dialog body -->

                        <!-- Begin dialog footer -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" onclick="cancelChildDialog('secondary-rule-tier-modal')">Close</button>
                                <button type="button" class="btn btn-primary" onclick="saveRuleTier()">Save changes</button>
                            </div>
                        <!-- End dialog footer -->
                    </div>
                </div>
            </div>
        <!-- End secondary rule tier dialog -->

        
        <!-- Confirmation dialog -->
            <div class="modal" tabindex="-1" id="confirmation-modal" aria-labelledby="confirmation-modal-label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <!-- Begin modal header -->
                            <div class="modal-header">
                                <h5 class="modal-title" id="confirmation-modal-label">Are you sure?</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        <!-- End modal header -->

                        <!-- Begin modal body -->
                            <div class="modal-body">
                                <p id="confirmation-modal-message">Modal body text goes here.</p>
                            </div>
                        <!-- End modal body -->

                        <!-- Begin modal footer -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary" id="confirmation-modal-confirm-btn">Yes</button>
                                <button type="button" class="btn btn-secondary" onclick="cancelConfirmationDialog()">No</button>
                            </div>
                        <!-- End modal footer -->
                    </div>
                </div>
            </div>
        <!-- End confirmation dialog -->

        <!-- Status dialog -->
            <div class="modal" tabindex="-1" id="status-modal" aria-labelledby="status-modal-label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <!-- Begin modal header -->
                            <div class="modal-header">
                                <h5 class="modal-title" id="status-modal-label">An Error Occurred</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        <!-- End modal header -->

                        <!-- Begin modal body -->
                            <div class="modal-body">
                                <p id="status-modal-message">Modal body text goes here.</p>
                            </div>
                        <!-- End modal body -->

                        <!-- Begin modal footer -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            </div>
                        <!-- End modal footer -->
                    </div>
                </div>
            </div>
        <!-- End status dialog -->
    <!-- End dialog prototypes -->

    <!-- Begin page content -->
        <div class="container content-container">
            <!-- Page Title -->
                <section>
                    <div class="row">
                        <div class="col text-center">
                            <h1 class="display-5 fw-bold text-body-emphasis">Configure Questions & Tax Rates</h1>
                        </div>
                    </div>
                </section>
            <!-- End Page Title -->
            <!-- Begin main content -->
                <main>
                    <!-- Begin control panel -->
                        <section>
                            <div class="control-panel">
                                <div class="row jurisdiction-select-panel">
                                    <!-- Begin jurisdiction select -->
                                        <div class="col">
                                            <label for="jurisdictions-select">Choose Jurisdiction</label>
                                            <select class="custom-select" id="jurisdictions-select">
                                            </select>
                                        </div>
                                    <!-- End jurisdiction select -->
                                </div>

                                <div class="row tab-controls">
                                    <!-- Begin tab controls -->
                                        <div class="col">
                                            <div class="nav nav-pills" id="nav-tab" role="tablist">
                                                <button class="nav-link active mt-3 border" id="nav-forms-tab" data-toggle="tab" data-target="#nav-forms"
                                                    type="button" role="tab" aria-controls="nav-forms" aria-selected="true"
                                                    data-toggle="tooltip" data-placement="top"
                                                    title="Add, edit, and remove the questions that IT contractors need to be asked to calculate tax for this jurisdiction">
                                                    Manage Questions
                                                </button>
                                                <button class="nav-link mt-3 border" id="nav-rules-tab" data-toggle="tab" data-target="#nav-rules"
                                                    type="button" role="tab" aria-controls="nav-rules" aria-selected="false"
                                                    data-toggle="tooltip" data-placement="top"
                                                    title="Add, edit, and remove the tax rules that are used to calculate tax for this jurisdiction">
                                                    Manage Tax Rates
                                                </button>
                                            </div>
                                        </div>
                                    <!-- End tab controls -->
                                </div>
                            </div>
                        </section>
                    <!-- End control panel -->

                    <!-- Begin tab content -->
                        <div class="tab-content border" id="nav-tabContent">
                            <!-- Forms config -->
                            <div class="tab-pane fade show active" id="nav-forms" role="tabpanel" aria-labelledby="nav-forms-tab">
                                <div class="container">
                                    <!-- Form manager options -->
                                    <div class="row">
                                        <div class="col manage-option-col">
                                            <button type="button" class="btn btn-primary mt-3" data-toggle="modal" data-target="#question-type-modal"
                                                data-toggle="tooltip" data-placement="top" title="Add a new question">
                                                <i class="fas fa-plus"></i> Question
                                            </button>
                                        </div>
                                    </div>
                                    <!-- End form manager options -->
                                    <div class="row">
                                        <div class="col" id="questions-display-container">
                                            <!-- Boolean question -->
                                            <div class="card hidden" id="boolean-question-display-card">
                                                <div class="card-body">
                                                    <table class="table table-borderless">
                                                        <tbody>
                                                            <tr>
                                                                <td rowspan="4" class="entity-type-col">
                                                                    <i class="fas fa-toggle-on"></i>
                                                                    Yes/No Question
                                                                </td>
                                                                <td class="entity-field-name-col"><b>Question Text</b></td>
                                                                <td id="boolean-question-display-text" class="entity-field-value-col">Text</td>
                                                                <td rowspan="4" class="entity-actions-col">
                                                                    <i class="fas fa-edit edit-button"
                                                                        data-toggle="tooltip" data-placement="top" title="Edit this question"></i>
                                                                    <i class="fas fa-trash-alt delete-button"
                                                                        data-toggle="tooltip" data-placement="top" title="Delete this question"></i>
                                                                    <i class="fas fa-arrow-up move-up-button"
                                                                        data-toggle="tooltip" data-placement="top" title="Move this question up"></i>
                                                                    <i class="fas fa-arrow-down move-down-button"
                                                                        data-toggle="tooltip" data-placement="top" title="Move this question down"></i>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td><b>Data Name</b></td>
                                                                <td id="boolean-question-display-variable-name">Variable Name</td>
                                                            </tr>
                                                            <tr>
                                                                <td><b>Explainer</b></td>
                                                                <td id="boolean-question-display-explainer">Explainer</td>
                                                            </tr>
                                                            <tr>
                                                                <td><b>Is Mandatory?</b></td>
                                                                <td id="boolean-question-display-mandatory">Mandatory</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <!-- End boolean question -->

                                            <!-- Numeric question -->
                                            <div class="card hidden" id="numeric-question-display-card">
                                                <div class="card-body">
                                                    <table class="table table-borderless">
                                                        <tbody>
                                                            <tr>
                                                                <td rowspan="5" class="entity-type-col">
                                                                    <i class="fas fa-chart-pie"></i>
                                                                    Numeric Question
                                                                </td>
                                                                <td class="entity-field-name-col"><b>Question Text</b></td>
                                                                <td id="numeric-question-display-text" class="entity-field-value-col">Text</td>
                                                                <td rowspan="5" class="entity-actions-col">
                                                                    <i class="fas fa-edit edit-button"
                                                                        data-toggle="tooltip" data-placement="top" title="Edit this question"></i>
                                                                    <i class="fas fa-trash-alt delete-button"
                                                                        data-toggle="tooltip" data-placement="top" title="Delete this question"></i>
                                                                    <i class="fas fa-arrow-up move-up-button"
                                                                        data-toggle="tooltip" data-placement="top" title="Move this question up"></i>
                                                                    <i class="fas fa-arrow-down move-down-button"
                                                                        data-toggle="tooltip" data-placement="top" title="Move this question down"></i>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td><b>Data Name</b></td>
                                                                <td id="numeric-question-display-variable-name">Variable Name</td>
                                                            </tr>
                                                            <tr>
                                                                <td><b>Explainer</b></td>
                                                                <td id="numeric-question-display-explainer">Explainer</td>
                                                            </tr>
                                                            <tr>
                                                                <td><b>Is Mandatory?</b></td>
                                                                <td id="numeric-question-display-mandatory">Mandatory</td>
                                                            </tr>
                                                            <tr>
                                                                <td><b>Validation Rule</b></td>
                                                                <td id="numeric-question-display-validation-rule-summary">Integer between 0 and 100</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <!-- End numeric question -->

                                            <!-- Multiple choice question -->
                                            <div class="card hidden" id="multichoice-question-display-card">
                                                <div class="card-body">
                                                    <table class="table table-borderless">
                                                        <tbody>
                                                            <tr>
                                                                <td rowspan="5" class="entity-type-col">
                                                                    <i class="fas fa-tasks"></i>
                                                                    Multiple Choice Question
                                                                </td>
                                                                <td class="entity-field-name-col"><b>Question Text</b></td>
                                                                <td id="multichoice-question-display-text" class="entity-field-value-col">Text</td>
                                                                <td rowspan="5" class="entity-actions-col">
                                                                    <i class="fas fa-edit edit-button"
                                                                        data-toggle="tooltip" data-placement="top" title="Edit this question"></i>
                                                                    <i class="fas fa-trash-alt delete-button"
                                                                        data-toggle="tooltip" data-placement="top" title="Delete this question"></i>
                                                                    <i class="fas fa-arrow-up move-up-button"
                                                                        data-toggle="tooltip" data-placement="top" title="Move this question up"></i>
                                                                    <i class="fas fa-arrow-down move-down-button"
                                                                        data-toggle="tooltip" data-placement="top" title="Move this question down"></i>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td><b>Data Name</b></td>
                                                                <td id="multichoice-question-display-variable-name">Variable Name</td>
                                                            </tr>
                                                            <tr>
                                                                <td><b>Explainer</b></td>
                                                                <td id="multichoice-question-display-explainer">Explainer</td>
                                                            </tr>
                                                            <tr>
                                                                <td><b>Is Mandatory?</b></td>
                                                                <td id="multichoice-question-display-mandatory">Mandatory</td>
                                                            </tr>
                                                            <tr>
                                                                <td><b>Allow Multiple Selections?</b></td>
                                                                <td id="multichoice-question-display-multiselect">Multiselect</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <!-- End multiple choice question -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- End forms config -->

                            <!-- Rules config -->
                            <div class="tab-pane fade" id="nav-rules" role="tabpanel" aria-labelledby="nav-rules-tab">
                                <div class="container">
                                    <!-- Rule manager options -->
                                    <div class="row">
                                        <div class="col manage-option-col">
                                            <button type="button" class="btn btn-primary mt-3" onclick="createRuleset()"
                                                data-toggle="tooltip" data-placement="top"
                                                title="Tax rule collections group rules by the category of tax they relate to. Click to create a new tax rule collection.">
                                                <i class="fas fa-plus"></i>
                                                Tax Rule Collection
                                            </button>
                                        </div>
                                    </div>
                                    <!-- Rule manager options -->

                                    <div class="row">
                                        <div class="col">
                                            <!-- Ruleset -->
                                            <div class="row">
                                                <div class="col" id="rulesets-display-container">
                                                    <div class="card hidden ruleset-container" id="ruleset-display-card">
                                                        <div class="card-body">
                                                            <div class="row mb-2">
                                                                <div class="col">
                                                                    <strong class="lead"><i class="fas fa-list-ol"></i></strong>&nbsp;
                                                                    <strong id="ruleset-display-card-name" class="lead">Ruleset name</strong>
                                                                </div>
                                                                <div class="col-2 text-right">
                                                                    <!-- Ruleset actions -->
                                                                        <i class="fas fa-plus add-rule-button"
                                                                            data-toggle="tooltip" data-placement="top" title="Edit this ruleset"></i>
                                                                        <i class="fas fa-trash-alt delete-ruleset-button"
                                                                            data-toggle="tooltip" data-placement="top" title="Delete this ruleset"></i>
                                                                        <i class="fas fa-arrow-up move-ruleset-up-button"
                                                                            data-toggle="tooltip" data-placement="top" title="Move this ruleset up"></i>
                                                                        <i class="fas fa-arrow-down move-ruleset-down-button"
                                                                            data-toggle="tooltip" data-placement="top" title="Move this ruleset down"></i>
                                                                    <!-- End ruleset actions -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col" id="ruleset-display-card-rules">
                                                                    <!-- Rules -->
                                                                        <!-- Flat rate rule -->
                                                                        <div class="card hidden rule-container" id="flat-rate-rule-display-card">
                                                                            <div class="card-body">
                                                                                <table class="table table-borderless">
                                                                                    <tbody>
                                                                                        <tr>
                                                                                            <td rowspan="4" class="entity-type-col">
                                                                                                <i class="fas fa-percent"></i>
                                                                                                Flat rate
                                                                                            </td>
                                                                                            <td class="entity-field-name-col"><b>Name</b></td>
                                                                                            <td id="flat-rate-rule-display-card-name" class="entity-field-value-col">Name</td>
                                                                                            <td rowspan="4" class="entity-actions-col">
                                                                                                <i class="fas fa-edit edit-button"
                                                                                                    data-toggle="tooltip" data-placement="top"
                                                                                                    title="Edit this rule"></i>
                                                                                                <i class="fas fa-trash-alt delete-button"
                                                                                                    data-toggle="tooltip" data-placement="top"
                                                                                                    title="Delete this rule"></i>
                                                                                                <i class="fas fa-arrow-up move-up-button"
                                                                                                    data-toggle="tooltip" data-placement="top"
                                                                                                    title="Move this rule up"></i>
                                                                                                <i class="fas fa-arrow-down move-down-button"
                                                                                                    data-toggle="tooltip" data-placement="top"
                                                                                                    title="Move this rule down"></i>
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td><b>Income Source</b></td>
                                                                                            <td id="flat-rate-rule-display-card-variable-name">Variable Name</td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td><b>Explainer</b></td>
                                                                                            <td id="flat-rate-rule-display-card-explainer">Explainer</td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td><b>Tax Rate</b></td>
                                                                                            <td id="flat-rate-rule-display-card-tax-rate">Flat rate</td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                        <!-- End flat rate rule -->

                                                                        <!-- Tiered rate rule -->
                                                                        <div class="card hidden rule-container" id="tiered-rate-rule-display-card">
                                                                            <div class="card-body">
                                                                                <table class="table table-borderless">
                                                                                    <tbody>
                                                                                        <tr>
                                                                                            <td rowspan="3" class="entity-type-col">
                                                                                                <i class="fas fa-layer-group"></i>
                                                                                                Tiered rate
                                                                                            </td>
                                                                                            <td class="entity-field-name-col"><b>Name</b></td>
                                                                                            <td id="tiered-rate-rule-display-card-name" class="entity-field-value-col">
                                                                                                Name
                                                                                            </td>
                                                                                            <td rowspan="3" class="entity-actions-col">
                                                                                                <i class="fas fa-edit edit-button"
                                                                                                    data-toggle="tooltip" data-placement="top"
                                                                                                    title="Edit this rule"></i>
                                                                                                <i class="fas fa-trash-alt delete-button"
                                                                                                    data-toggle="tooltip" data-placement="top"
                                                                                                    title="Delete this rule"></i>
                                                                                                <i class="fas fa-arrow-up move-up-button"
                                                                                                    data-toggle="tooltip" data-placement="top"
                                                                                                    title="Move this rule up"></i>
                                                                                                <i class="fas fa-arrow-down move-down-button"
                                                                                                    data-toggle="tooltip" data-placement="top"
                                                                                                    title="Move this rule down"></i>
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td><b>Income Source</b></td>
                                                                                            <td id="tiered-rate-rule-display-card-variable-name">Variable Name</td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td><b>Explainer</b></td>
                                                                                            <td id="tiered-rate-rule-display-card-explainer">Explainer</td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                        <!-- End tiered rate rule -->

                                                                        <!-- Secondary tiered rate rule -->
                                                                        <div class="card hidden rule-container" id="secondary-tiered-rate-rule-display-card">
                                                                            <div class="card-body">
                                                                                <table class="table table-borderless">
                                                                                    <tbody>
                                                                                        <tr>
                                                                                            <td rowspan="4" class="entity-type-col">
                                                                                                <i class="fas fa-link"></i>
                                                                                                Progressive tiered rate
                                                                                            </td>
                                                                                            <td class="entity-field-name-col"><b>Name</b></td>
                                                                                            <td id="secondary-tiered-rate-rule-display-card-name"
                                                                                                class="entity-field-value-col">
                                                                                                Name
                                                                                            </td>
                                                                                            <td rowspan="4" class="entity-actions-col">
                                                                                                <i class="fas fa-edit edit-button"
                                                                                                    data-toggle="tooltip" data-placement="top"
                                                                                                    title="Edit this rule"></i>
                                                                                                <i class="fas fa-trash-alt delete-button"
                                                                                                    data-toggle="tooltip" data-placement="top"
                                                                                                    title="Delete this rule"></i>
                                                                                                <i class="fas fa-arrow-up move-up-button"
                                                                                                    data-toggle="tooltip" data-placement="top"
                                                                                                    title="Move this rule up"></i>
                                                                                                <i class="fas fa-arrow-down move-down-button"
                                                                                                    data-toggle="tooltip" data-placement="top"
                                                                                                    title="Move this rule down"></i>
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td><b>Income Source</b></td>
                                                                                            <td id="secondary-tiered-rate-rule-display-card-variable-name">Variable Name</td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td><b>Explainer</b></td>
                                                                                            <td id="secondary-tiered-rate-rule-display-card-explainer">Explainer</td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td><b>Primary Rule</b></td>
                                                                                            <td id="secondary-tiered-rate-rule-display-card-primary-rule">Primary rule</td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                        <!-- End secondary tiered rate rule -->
                                                                    <!-- End rules -->
                                                                </div>
                                                            </div>               
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End ruleset -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- End rules config -->
                        </div>
                    <!-- End tab content -->
                </main>
            <!-- End main content -->
        </div>
    <!-- End page content -->
{% endblock %}